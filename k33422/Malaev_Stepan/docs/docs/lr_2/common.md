# Представления для работы с пользователем

## Листинг кода

`common/views.py`

```python
from django.utils import timezone
from django.views.generic import TemplateView

from tours import models


class IndexView(TemplateView):
    template_name = 'common/index.html'
    tours_on_page: int = 6
    
    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        context['recommended_tours'] = models.Tour.objects
        .filter(start_date__gte=timezone.localdate())
        .order_by('start_date')[:self.tours_on_page]
        
        return context
```

`common/urls.py`

```python
from django.urls import path

from . import views

urlpatterns = [
    path('', views.IndexView.as_view(), name='home')
]
```

## Основные Моменты

### Использование `TemplateView`

- **Шаблон**: Для отображения главной страницы используется класс `TemplateView`, позволяющий легко интегрировать
  статические страницы с динамическим контентом.
- **Кастомизация Контекста**: Через метод `get_context_data`, класс `IndexView` дополняет контекст шаблона данными о
  рекомендуемых турах.

### Фильтрация и Отбор Туров

- **Актуальность Туров**: В контекст шаблона добавляются туры, начинающиеся с текущей даты, что обеспечивает
  актуальность представленной информации.
- **Ограничение Количества Туров**: Установлено ограничение на количество отображаемых туров (`tours_on_page`), что
  позволяет избежать перегрузки страницы информацией.

## Особенности

- **Динамическая Настройка Количества Туров**: Переменная класса `tours_on_page` позволяет легко настраивать количество
  туров, отображаемых на главной странице, что упрощает адаптацию страницы под различные дизайны и пользовательские
  предпочтения.
- **Оптимизация Запросов**: Использование метода `order_by` с последующим срезом результатов запроса до заданного числа
  туров позволяет оптимизировать загрузку данных и повысить производительность страницы.
- **Улучшенный Пользовательский Опыт**: Предоставление актуальной информации о предстоящих турах сразу на главной
  странице улучшает пользовательский опыт, делая сайт более привлекательным для потенциальных клиентов.
